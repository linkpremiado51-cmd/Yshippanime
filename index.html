<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Assista seus animes favoritos no Anime I Geek">
    <title>Anime I Geek - Sua Home de Animes</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jura:wght@300..700&family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
/* INÍCIO DO CSS UNIFICADO (Com Alterações Solicitadas) */
html {
    scroll-behavior: smooth;
    font-size: 16px;
}
:root {
    --primary-gradient: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
    --text-primary: #1a202c;
    --text-secondary: #4a5568;
    --background: #f5f7fa;
    --surface: rgba(0, 0, 0, 0.05);
    --border: rgba(0, 0, 0, 0.1);
    --shadow-color: rgba(0, 0, 0, 0.2);
    --blur-effect: blur(12px);
    --transition: all 0.6s ease-in-out;
    --highlight-color: #E53E3E;
    --highlight-hover: #C53030;
    --watch-later-color: #38A169;
    --watch-later-hover: #2F855A;
    --episodes-color: #2D3748;
    --episodes-hover: #4A5568;
    --report-error-color: #4B5563;
    --report-error-hover: #6B7280;
    --menu-background: rgba(255, 255, 255, 0.65);
    --menu-item-background: rgba(0, 0, 0, 0.05);
    --menu-item-hover-background: rgba(0, 0, 0, 0.1);
    --spacing-sm: 12px;
    --spacing-md: 20px;
    --spacing-section: 40px;
    --font-size-xs: clamp(0.8rem, 2vw, 1rem);
    --font-size-sm: clamp(1rem, 2.5vw, 1.1rem);
    --font-size-md: clamp(1.1rem, 3vw, 1.3rem);
    --font-size-lg: clamp(1.4rem, 4vw, 1.8rem);
    --primary: #2d3748;
    --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
    --menu-bg-light: rgba(255, 255, 255, 0.5);
    --menu-bg-dark: rgba(45, 55, 72, 0.5);
    --card-bg: #ffffff;
    --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    --header-bg: var(--surface);
    --progress-bg: #edf2f7;
    --zoom-scale: 1.0;
    --watch-now-button-width: 150px;
    --cover-button-opacity: 0.8;
}
[data-theme="dark"] {
    --text-primary: #e2e8f0;
    --text-secondary: #a0aec0;
    --background: #1a202c;
    --surface: rgba(255, 255, 255, 0.05);
    --border: #4a5568;
    --shadow-color: rgba(0, 0, 0, 0.4);
    --menu-background: rgba(45, 55, 72, 0.65);
    --menu-item-background: rgba(255, 255, 255, 0.05);
    --menu-item-hover-background: rgba(255, 255, 255, 0.1);
    --card-bg: #374151;
    --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.4);
    --progress-bg: #4a5568;
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    user-select: text !important;
    -webkit-user-select: text !important;
}
body {
    font-family: 'Jura', sans-serif;
    font-weight: 400;
    line-height: 1.5;
    background: var(--background);
    color: var(--text-primary);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden;
    transition: background 0.3s ease, color 0.3s ease;
    overscroll-behavior-x: none;
}
.zoom-container {
    width: 100%;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 0;
}
.header-menu {
    width: 100%;
}
.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 65px;
    background: var(--header-bg, var(--surface));
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 16px;
    z-index: 1001;
    box-shadow: var(--shadow);
    transition: background 0.3s ease;
}
.header h1 {
    font-size: 1.125rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-primary);
}
:fullscreen .header {
    display: none !important;
}
:-webkit-full-screen .header {
    display: none !important;
}
.top-bar__section {
    display: flex;
    align-items: center;
    gap: 12px;
}
.top-bar__icon {
    color: var(--text-primary);
    background: none;
    border: none;
    padding: 8px;
    cursor: pointer;
    transition: background 0.2s, color 0.2s;
    border-radius: 0px;
}
.top-bar__icon i {
    font-size: 1.125rem;
}
.top-bar__icon:hover {
    background: var(--primary);
    color: white;
}
.top-bar__icon:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
/* NOVO: Menu Hamburguer (Renderizado no próprio código) */
.hamburger-menu {
    position: fixed;
    top: 0;
    right: -300px;
    width: 280px;
    max-width: 80%;
    height: 100%;
    background: var(--menu-background);
    backdrop-filter: var(--blur-effect);
    z-index: 4000;
    transition: right 0.3s ease-in-out;
    box-shadow: -4px 0 12px var(--shadow-color);
    padding: 65px 20px 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}
.hamburger-menu.open {
    right: 0;
}
.menu-item {
    padding: 15px;
    margin-bottom: 8px;
    background: var(--menu-item-background);
    color: var(--text-primary);
    text-decoration: none;
    font-size: 1rem;
    font-weight: 500;
    border-radius: 0px;
    transition: background 0.2s ease;
    display: flex;
    align-items: center;
    gap: 10px;
}
.menu-item:hover {
    background: var(--menu-item-hover-background);
}
.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 3999;
    display: none;
}
.menu-overlay.active {
    display: block;
}
.menu {
    position: fixed;
    top: 65px;
    left: 0;
    right: 0;
    width: 100%;
    height: 50vh;
    background: var(--menu-bg-light);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border);
    box-shadow: var(--shadow-lg);
    transform: translateY(-100%);
    transition: transform 0.4s ease;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 16px;
    opacity: 0;
    pointer-events: none;
}
[data-theme="dark"] .menu {
    background: var(--menu-bg-dark);
}
.menu.open {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
}
.search-container {
    width: 100%;
    max-width: 600px;
    position: relative;
    margin-bottom: 16px;
}
.search-input {
    width: 100%;
    padding: 14px 50px 14px 16px;
    font-size: 1rem;
    border: 1px solid var(--border);
    border-radius: 0px;
    background: var(--surface);
    color: var(--text-primary);
    outline: none;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}
.search-input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(45, 55, 72, 0.1);
}
.search-icon {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-secondary);
    font-size: 1.1rem;
    pointer-events: none;
}
.result-card {
    width: 100%;
    max-width: 600px;
    background: var(--card-bg);
    border-radius: 0px;
    padding: 20px;
    box-shadow: var(--card-shadow);
    display: none;
    flex-direction: column;
    gap: 12px;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.4s ease;
    margin-top: 8px;
}
.result-card.show {
    opacity: 1;
    transform: translateY(0);
    display: flex;
}
.result-suggestion-item {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    border-radius: 0px;
    text-decoration: none;
    color: var(--text-primary);
    transition: background 0.2s ease;
    width: 100%;
}
.result-suggestion-item:hover {
    background: var(--menu-item-hover-background);
}
.result-suggestion-item i {
    margin-right: 12px;
    color: var(--text-secondary);
    width: 20px;
    text-align: center;
}
.result-suggestion-title {
    font-weight: 500;
    font-size: 0.95rem;
}
.notification {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 15px 30px;
    box-shadow: 0 4px 12px var(--shadow-color);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 2000;
    font-size: var(--font-size-md);
    font-weight: 500;
    text-align: center;
    max-width: 90%;
    width: 400px;
    border-radius: 0px;
}
[data-theme="light"] .notification {
    background: rgba(255, 255, 255, 0.95);
    color: var(--text-primary);
}
[data-theme="dark"] .notification {
    background: rgba(18, 21, 32, 0.95);
    color: var(--text-primary);
}
.notification.show {
    opacity: 1;
}
.footer {
    width: 100%;
    background: var(--surface);
    color: var(--text-secondary);
    text-align: center;
    padding: 16px 16px;
    margin-top: var(--spacing-section);
    box-shadow: 0 -2px 5px var(--shadow-color);
    font-size: var(--font-size-xs);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}
.footer-left {
    display: flex;
    align-items: center;
    gap: 8px;
}
.footer-right {
    text-align: right;
}
.footer a {
    color: var(--highlight-color);
    text-decoration: none;
    margin: 0 10px;
    transition: color 0.2s ease;
}
.footer a:hover {
    color: var(--highlight-hover);
}
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
.fade-in {
    animation: fadeIn 0.4s ease-out forwards;
}
@media (max-width: 768px) {
    :root {
        --spacing-section: 25px;
    }
    .header {
        padding: 0 12px;
        height: 55px;
    }
    .header h1 {
        font-size: 1rem;
    }
    .top-bar__icon i {
        font-size: 1rem;
    }
    .notification {
        font-size: var(--font-size-sm);
        padding: 10px 20px;
        width: 300px;
    }
    .zoom-container {
        padding-top: 0;
    }
    .menu {
        top: 55px;
    }
    .top-bar__icon {
        padding: 6px;
    }
    .footer {
        flex-direction: column;
        align-items: flex-start;
        padding-bottom: 70px;
    }
    .footer-left {
        width: 100%;
        margin-bottom: 10px;
        justify-content: center;
    }
    .footer-right {
        text-align: center;
        width: 100%;
    }
    .modal-content {
        max-width: 95%;
        margin: 20px;
        padding: 20px;
        max-height: 90vh;
        overflow-y: auto;
    }
    .modal-main-content {
        flex-direction: column;
    }
    .modal-trailer-container {
        width: 100%;
        margin-right: 0;
        margin-bottom: 15px;
    }
    .modal-synopsis-container {
        width: 100%;
    }
}
@media (max-width: 480px) {
   /* Estilos mobile */
}
@media (min-width: 601px) and (max-width: 1024px) {
    .header h1 {
        font-size: 1.125rem;
    }
}
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 5000;
    display: none;
    justify-content: center;
    align-items: center;
}
.modal-content {
    background: var(--card-bg);
    color: var(--text-primary);
    padding: 30px;
    border-radius: 0px;
    width: 90%;
    max-width: 800px;
    box-shadow: var(--shadow-lg);
    animation: fadeIn 0.3s ease-out;
    max-height: 90vh;
    overflow-y: auto;
}
.modal-content h3 {
    font-size: var(--font-size-lg);
    font-weight: 700;
    margin-bottom: 20px;
    border-bottom: 2px solid var(--highlight-color);
    padding-bottom: 10px;
}
.modal-main-content {
    display: flex;
    gap: 20px;
}
.modal-trailer-container {
    flex: 1;
    min-width: 300px;
    position: relative;
    padding-bottom: calc(56.25% + 30px);
    height: 0;
    overflow: hidden;
    background: #000;
}
.trailer-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}
.modal-synopsis-container {
    flex: 1;
    max-height: 400px;
    overflow-y: auto;
    padding-right: 10px;
}
.modal-synopsis-container p {
    font-size: var(--font-size-sm);
    line-height: 1.6;
    margin-bottom: 10px;
    color: var(--text-secondary);
}
.modal-synopsis-container {
    scrollbar-width: thin;
    scrollbar-color: var(--highlight-color) var(--surface);
}
.modal-synopsis-container::-webkit-scrollbar {
    width: 8px;
}
.modal-synopsis-container::-webkit-scrollbar-thumb {
    background-color: var(--highlight-color);
    border-radius: 4px;
}
.modal-synopsis-container::-webkit-scrollbar-track {
    background: var(--surface);
}
.report-option {
    display: block;
    width: 100%;
    padding: 12px;
    margin-bottom: 10px;
    background: var(--menu-item-background);
    border: 1px solid var(--border);
    border-radius: 0px;
    text-align: left;
    cursor: pointer;
    transition: background 0.2s;
    font-size: var(--font-size-sm);
    display: flex;
    align-items: center;
    gap: 10px;
}
.report-option:hover {
    background: var(--menu-item-hover-background);
}
.modal-close-btn {
    display: block;
    width: 100%;
    padding: 10px;
    margin-top: 20px;
    background: var(--highlight-color);
    color: white;
    border: none;
    border-radius: 0px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.2s;
}
.modal-close-btn:hover {
    background: var(--highlight-hover);
}
.fixed-footer-controls {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: var(--header-bg, var(--surface));
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding: 0 16px;
    z-index: 1002;
    box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.1);
    gap: 10px;
}
@media (min-width: 769px) {
    .fixed-footer-controls {
        display: none;
    }
    .footer {
        padding: 16px;
    }
}
@media (max-width: 768px) {
    .zoom-container main {
        padding-bottom: 120px;
    }
}
.hero-section {
    width: 100%;
    max-width: 1000px;
    margin: 65px auto 0;
    height: 400px;
    background: var(--surface);
    border-radius: 0px;
    box-shadow: var(--shadow-lg);
    position: relative;
    overflow: hidden;
    transform: translateY(-100px);
}
.hero-slide {
    width: 100%;
    height: 100%;
    position: absolute;
    opacity: 0;
    transition: opacity 1s ease-in-out;
    text-decoration: none;
}
.hero-slide.active {
    opacity: 1;
}
.hero-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.hero-info {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 100%);
    padding: var(--spacing-md);
    color: white;
}
.hero-info h2 {
    font-size: var(--font-size-lg);
    font-weight: 700;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}
.hero-info p {
    font-size: var(--font-size-sm);
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}
/* NOVO: Estilo para o carrossel de capa com deslizamento e barras de progresso */
.hero-carousel-container {
    width: 100%;
    max-width: 1000px;
    margin: 65px auto 0;
    height: 400px;
    position: relative;
    overflow: hidden;
    border-radius: 0px;
    box-shadow: var(--shadow-lg);
    transform: translateY(-100px);
}
.hero-carousel-track {
    display: flex;
    width: 100%;
    height: 100%;
    transition: transform 0.8s ease-in-out;
}
.hero-carousel-slide {
    min-width: 100%;
    height: 100%;
    position: relative;
    text-decoration: none;
    display: block;
}
.hero-carousel-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.hero-carousel-info {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 100%);
    padding: var(--spacing-md);
    color: white;
}
.hero-carousel-info h2 {
    font-size: var(--font-size-lg);
    font-weight: 700;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}
.hero-carousel-info p {
    font-size: var(--font-size-sm);
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}
.progress-container {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 5px;
    padding: 8px;
    background: rgba(0, 0, 0, 0.5);
}
.progress-bar {
    width: 30px;
    height: 3px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 0px;
    overflow: hidden;
}
.progress-bar.active {
    background: rgba(255, 255, 255, 0.6);
}
.progress-bar.active::after {
    content: '';
    display: block;
    width: 100%;
    height: 100%;
    background: white;
    animation: loading 6s linear forwards;
}
@keyframes loading {
    from {
        width: 0%;
    }
    to {
        width: 100%;
    }
}
.anime-carousel-section {
    width: 100%;
    max-width: 1000px;
    margin: var(--spacing-section) auto 0;
    padding: 0 0.75rem;
    position: relative;
}
:root {
    --linha-comprimento: 238px;
    --linha-cor: var(--highlight-color);
    --linha-espessura: 0.7px;
}
.carousel-title {
    position: relative;
    display: inline-block;
    font-family: 'Ubuntu', sans-serif;
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 15px;
    padding: 5px 0;
    line-height: 1;
    cursor: pointer;
    width: fit-content;
    z-index: 1;
}
.carousel-title::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    height: var(--linha-espessura);
    background: var(--linha-cor);
    width: var(--linha-comprimento);
    z-index: -1;
}
.carousel-horizontal {
    display: flex;
    overflow-x: scroll;
    padding-bottom: 15px;
    gap: var(--spacing-md);
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-x: contain;
}
.carousel-horizontal .anime-card {
    scroll-snap-align: start;
    flex-shrink: 0;
    width: calc((100% - 2 * var(--spacing-md)) / 3);
}
.anime-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: var(--spacing-md);
}
.anime-card {
    background: var(--card-bg);
    border-radius: 0px;
    box-shadow: var(--shadow);
    transition: var(--transition);
    text-decoration: none;
    color: var(--text-primary);
    overflow: hidden;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeIn 0.5s ease-out forwards;
}
.anime-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}
.anime-card-image {
    width: 100%;
    padding-bottom: 140%;
    background-size: cover;
    background-position: center;
    background-color: var(--surface);
}
.anime-card-info {
    padding: var(--spacing-sm);
}
.anime-card-title {
    font-size: var(--font-size-sm);
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.anime-card-subtitle {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}
@media (max-width: 768px) {
    .hero-section,
    .hero-carousel-container {
        height: 300px;
        margin-top: 55px;
    }
    .anime-grid {
        display: grid;
        overflow-x: hidden;
        grid-template-columns: repeat(4, 1fr);
        gap: calc(var(--spacing-sm) / 1.5);
    }
    .anime-card {
        width: 100%;
        flex-shrink: 1;
    }
    .anime-card .anime-card-info {
        padding: calc(var(--spacing-sm) / 2);
    }
    .anime-card .anime-card-title {
        font-size: calc(var(--font-size-xs) * 0.9);
    }
    .anime-card .anime-card-subtitle {
        font-size: calc(var(--font-size-xs) * 0.8);
    }
    .carousel-horizontal .anime-card {
        width: calc((100% - 2 * var(--spacing-md)) / 3);
    }
}
@media (max-width: 480px) {
    .hero-section,
    .hero-carousel-container {
        height: 250px;
    }
    .anime-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: calc(var(--spacing-sm) / 2);
    }
}

/* NOVO: Estilo para o carrossel de imagens retangulares */
.image-carousel-section {
    width: 100%;
    max-width: 1000px;
    margin: var(--spacing-section) auto 0;
    padding: 0 5px; /* 5px de margem lateral */
    position: relative;
}
.image-carousel-container {
    display: flex;
    overflow-x: hidden; /* Oculta o scroll horizontal */
    padding: 0;
    gap: var(--spacing-md);
    position: relative;
    width: 100%;
}
.image-carousel-track {
    display: flex;
    transition: transform 0.8s ease-in-out; /* Transição suave para o movimento */
    width: 100%;
    gap: var(--spacing-md); /* Espaçamento entre os cards */
}
.image-carousel-card {
    flex: 0 0 auto; /* Impede que o card se redimensione */
    width: calc(100% - 10px); /* Largura quase total da tela, menos espaçamento */
    max-width: 960px; /* Limita a largura máxima */
    height: 95px; /* Altura fixa de 45px */
    background: var(--card-bg);
    border-radius: 0px;
    box-shadow: var(--shadow);
    overflow: hidden;
    text-decoration: none;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    position: relative;
}
.image-carousel-image {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Preenche o card mantendo proporção */
}
.image-carousel-info {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 90%);
    padding: 8px;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
}
.image-carousel-title {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: 4px;
}
.image-carousel-comment {
    font-size: var(--font-size-xs);
    color: #ccc; /* Cor clara para o comentário */
}

.nav-menu-container {
    position: fixed;
    top: 65px;
    left: 0;
    right: 0;
    height: 50px;
    background: var(--header-bg, var(--surface));
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding: 0 16px;
    z-index: 1000;
    overflow-x: auto;
    box-shadow: var(--shadow);
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: var(--highlight-color) var(--surface);
}
.nav-menu-container::-webkit-scrollbar {
    height: 6px;
}
.nav-menu-container::-webkit-scrollbar-thumb {
    background-color: var(--highlight-color);
    border-radius: 3px;
}
.nav-menu-container::-webkit-scrollbar-track {
    background: var(--surface);
}
.nav-menu-item {
    padding: 8px 16px;
    margin-right: 12px;
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-secondary);
    text-decoration: none;
    white-space: nowrap;
    border-radius: 0px;
    transition: all 0.2s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 2px solid transparent;
}
.nav-menu-item:hover {
    color: var(--text-primary);
    background: var(--menu-item-background);
}
.nav-menu-item.active {
    color: var(--highlight-color);
    border-bottom: 2px solid var(--highlight-color);
    background: var(--menu-item-background);
}
.category-content {
    display: none;
    width: 100%;
    min-height: 100vh;
    padding-top: 115px;
}
.category-content.active {
    display: block;
}
.category-content:not(#home-content) {
    padding-top: 115px !important;
}
.category-content:not(#home-content) #acao-content-container,
.category-content:not(#home-content) #aventura-content-container,
.category-content:not(#home-content) #romance-content-container,
.category-content:not(#home-content) #isekai-content-container,
.category-content:not(#home-content) #fantasia-content-container {
    width: 100%;
    height: calc(100vh - 115px);
    min-height: 500px;
}
.category-content:not(#home-content) iframe {
    width: 100% !important;
    height: 100% !important;
    min-height: calc(100vh - 115px) !important;
    border: none;
    display: block;
}
.category-content iframe {
    width: 100%;
    height: 100%;
    border: none;
}
#home-content .hero-carousel-container {
    margin-top: 115px;
}
#home-content main {
    padding-top: 0;
}
.category-content .hero-carousel-container {
    margin-top: 120px;
}
#generos-externo-grid {
    margin-top: 5px;
}
#acao-content #generos-externo-grid,
#aventura-content #generos-externo-grid,
#romance-content #generos-externo-grid,
#isekai-content #generos-externo-grid,
#fantasia-content #generos-externo-grid {
    margin-top: 5px;
}
.anime-carousel-section {
    margin-top: 5px;
}
body.loading #home-content > *:not(.hero-carousel-container),
body.loading .hero-carousel-container,
body.loading .hero-carousel-info,
body.loading .anime-carousel-section,
body.loading .anime-card {
    opacity: 0;
    visibility: hidden;
    transition: none;
}
body.loading .hero-carousel-container {
    background: var(--surface);
    min-height: 400px;
}
body.loading .hero-carousel-container img {
    display: none;
}
body.loading .hero-carousel-info {
    display: none;
}
#initial-loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--background);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition: opacity 0.3s ease;
}
#initial-loader i {
    font-size: 3rem;
    color: var(--highlight-color);
    margin-bottom: 1rem;
}
#initial-loader p {
    font-size: 1.2rem;
    color: var(--text-primary);
}
body:not(.loading) #initial-loader {
    opacity: 0;
    pointer-events: none;
}
/* NOVO: Estilo para os iframes persistidos */
.iframe-container {
    display: none;
    width: 100%;
    height: calc(100vh - 115px);
    min-height: 500px;
}
.iframe-container.active {
    display: block;
}
.iframe-container iframe {
    width: 100%;
    height: 100%;
    border: none;
}
    </style>
</head>
<body data-theme="light" class="loading">
    <div id="initial-loader" class="loading-spinner">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Carregando...</p>
    </div>
    <div class="header-menu">
        <nav class="header">
            <div class="top-bar__section">
                <h1><i class="fas fa-dragon"></i>Anime I Geek</h1>
            </div>
            <div class="top-bar__section">
                <button aria-label="Abrir busca" class="top-bar__icon" id="menu-icon">
                    <i class="fas fa-search"></i>
                </button>
                <button aria-label="Alternar tema" class="top-bar__icon" id="theme-toggle">
                    <i class="fas fa-adjust"></i>
                </button>
                <button aria-label="Abrir menu" class="top-bar__icon" id="hamburger-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>
        <nav class="nav-menu-container" id="nav-menu">
            <div class="nav-menu-item active" data-category="home">
                <i class="fas fa-home"></i> Home
            </div>
            <div class="nav-menu-item" data-category="acao">
                <i class="fas fa-bolt"></i> Ação
            </div>
            <div class="nav-menu-item" data-category="aventura">
                <i class="fas fa-compass"></i> Aventura
            </div>
            <div class="nav-menu-item" data-category="romance">
                <i class="fas fa-heart"></i> Romance
            </div>
            <div class="nav-menu-item" data-category="isekai">
                <i class="fas fa-globe"></i> Isekai
            </div>
            <div class="nav-menu-item" data-category="fantasia">
                <i class="fas fa-magic"></i> Fantasia
            </div>
        </nav>
        <nav class="menu" id="main-menu">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Pesquisar anime..." id="search-input">
                <i class="fas fa-search search-icon"></i>
            </div>
            <div class="result-card" id="result-card"></div>
        </nav>
       <div class="hamburger-menu" id="hamburgerMenu">
            <button class="menu-item" onclick="showNotification('Sistema em construção, volte mais tarde.')">
                <i class="fas fa-user-plus"></i> Cadastre-se
            </button>
            <button class="menu-item" onclick="showNotification('Sistema em construção, volte mais tarde.')">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
            <button class="menu-item" onclick="showNotification('Sistema em construção, volte mais tarde.')">
                <i class="fas fa-star"></i> Populares
            </button>
            <button class="menu-item" onclick="showNotification('Sistema em construção, volte mais tarde.')">
                <i class="fas fa-sort-alpha-down"></i> A - Z
            </button>
            <button class="menu-item" onclick="showNotification('Sistema em construção, volte mais tarde.')">
                <i class="fas fa-masks-theater"></i> Gêneros
            </button>
            <button class="menu-item" onclick="showNotification('Sistema em construção, volte mais tarde.')">
                <i class="fas fa-info-circle"></i> Sobre
            </button>
            <button class="top-bar__icon" id="openReportModalBtn" onclick="openReportModal()">
                <i class="fas fa-bug"></i> Reportar Erro
            </button>
        </div>
        <div class="menu-overlay" id="menuOverlay"></div>
    </div>
    <div class="zoom-container" id="zoom-container">
        <div class="category-content active" id="home-content">
            <!-- NOVO: Substituído por hero-carousel-container -->
            <section class="hero-carousel-container" id="hero-carousel-container">
                <div class="hero-carousel-track" id="hero-carousel-track">
                    <!-- Slides serão gerados via JS -->
                </div>
                <div class="progress-container" id="progress-container">
                    <!-- Barras de progresso serão geradas via JS -->
                </div>
            </section>
            <main style="width:100%;max-width:1000px;padding:0 0.75rem 120px;margin:0 auto;">
                <section class="anime-carousel-section" id="recommend-section">
                    <h2 class="carousel-title" data-link-id="none">Anime I Geek Recomenda</h2>
                    <div id="recommend-carousel"></div>
                </section>
                <section class="anime-carousel-section" id="genres-section">
                    <h2 class="carousel-title" data-link-id="genres">Gêneros</h2>
                    <div class="anime-grid" id="generos-externo-grid"></div>
                </section>
                <!-- NOVO: Carrossel de Imagens -->
                <section class="image-carousel-section" id="image-carousel-section">
                    <div class="image-carousel-container">
                        <div class="image-carousel-track" id="image-carousel-track">
                            <!-- Os cards serão gerados via JS -->
                        </div>
                    </div>
                </section>
                <section class="anime-carousel-section" id="releases-section">
                    <h2 class="carousel-title" data-link-id="releases">Lançamentos</h2>
                    <div class="anime-grid" id="recent-releases-grid"></div>
                </section>
                <section class="anime-carousel-section" id="popular-section">
                    <h2 class="carousel-title" data-link-id="popular">Populares</h2>
                    <div class="anime-grid" id="popular-animes-grid"></div>
                </section>
                <section class="anime-carousel-section" id="added-section">
                    <h2 class="carousel-title" data-link-id="added">Adicionados Recentemente</h2>
                    <div class="anime-grid" id="recently-added-grid"></div>
                </section>
                <section class="anime-carousel-section" id="binge-watch-section">
                    <h2 class="carousel-title" data-link-id="binge-watch">Para Maratonar em 1 Dia</h2>
                    <div id="binge-watch-carousel"></div>
                </section>
            </main>
        </div>
        <div class="category-content" id="acao-content">
            <div class="iframe-container" data-category="acao">
                <iframe src="acao.html?theme=light&zoom=0.75" title="Ação" class="category-iframe"></iframe>
            </div>
        </div>
        <div class="category-content" id="aventura-content">
            <div class="iframe-container" data-category="aventura">
                <iframe src="aventura.html?theme=light&zoom=0.75" title="Aventura" class="category-iframe"></iframe>
            </div>
        </div>
        <div class="category-content" id="romance-content">
            <div class="iframe-container" data-category="romance">
                <iframe src="romance.html?theme=light&zoom=0.75" title="Romance" class="category-iframe"></iframe>
            </div>
        </div>
        <div class="category-content" id="isekai-content">
            <div class="iframe-container" data-category="isekai">
                <iframe src="isekai.html?theme=light&zoom=0.75" title="Isekai" class="category-iframe"></iframe>
            </div>
        </div>
        <div class="category-content" id="fantasia-content">
            <div class="iframe-container" data-category="fantasia">
                <iframe src="fantasia.html?theme=light&zoom=0.75" title="Fantasia" class="category-iframe"></iframe>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-left"></div>
        <div class="footer-right">
            <p>© 2025 Anime I Geek. Todos os direitos reservados. Desenvolvido por xAI.</p>
        </div>
    </div>
    <div class="fixed-footer-controls">
        <button aria-label="Diminuir zoom" class="top-bar__icon" id="zoom-out-btn-fixed">
            <i class="fas fa-search-minus"></i>
        </button>
        <button aria-label="Aumentar zoom" class="top-bar__icon" id="zoom-in-btn-fixed">
            <i class="fas fa-search-plus"></i>
        </button>
    </div>
    <div class="notification" id="notification"></div>
    <div class="modal-overlay" id="reportErrorModal">
        <div class="modal-content">
            <h3><i class="fas fa-exclamation-triangle"></i> Reportar Problema</h3>
            <p>Selecione o problema encontrado (ex: link quebrado):</p>
            <button class="report-option" data-error-type="Link Quebrado"><i class="fas fa-link-slash"></i> Link Quebrado</button>
            <button class="report-option" data-error-type="Imagem Faltando"><i class="fas fa-image-slash"></i> Imagem Faltando</button>
            <button class="report-option" data-error-type="Outro Problema"><i class="fas fa-puzzle-piece"></i> Outro Problema</button>
            <button class="modal-close-btn" id="closeReportModal">Cancelar</button>
        </div>
    </div>
    <div class="modal-overlay" id="detailsModal">
        <div class="modal-content">
            <h3 id="detailsTitle"></h3>
            <div class="modal-main-content">
                <div class="modal-trailer-container">
                    <iframe id="trailerVideo" class="trailer-video" width="560" height="315" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div class="modal-synopsis-container">
                    <h4>Sinopse:</h4>
                    <p id="synopsisText"></p>
                </div>
            </div>
            <button class="modal-close-btn" id="closeDetailsModal">Fechar</button>
        </div>
    </div>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-analytics.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js';
        const firebaseConfig = {
            apiKey: "AIzaSyA9vB_anmutvZByIhKxsPJbsP0VZ7gyWB0",
            authDomain: "sorteio-mega-sorte.firebaseapp.com",
            projectId: "sorteio-mega-sorte",
            storageBucket: "sorteio-mega-sorte.appspot.com",
            messagingSenderId: "776750928407",
            appId: "1:776750928407:web:72da06deb8b97302b5c252",
            measurementId: "G-GD7D30N0G"
        };
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        const CONSTRUCTION_LINK = "javascript:showNotification('Sistema em construção, volte mais tarde.')";
        const CONSTRUCTION_SUBTITLE = "Sistema em construção";
        const homepageData = {
            hero: [
                { title: "Spy-Famyli", subtitle: "Todos têm um lado oculto...", image: "https://i.postimg.cc/pL6hhZQs/28325-1_9_8b.webp", url: "catalogo/chotto_dake.html" },
                { title: "My Hero Academy final", subtitle: "A nova temporada está aqui!", image: "https://i.postimg.cc/5yTTQD0f/28328-1_9_8b.webp", url: CONSTRUCTION_LINK },
                { title: "L9999", subtitle: "Ele quase foi morto nas profundezas da masmorra...", image: "https://i.postimg.cc/GtCq0rHT/28329-1_9_8b.webp", url: CONSTRUCTION_LINK }
            ],
            bingeWatch: [
                { title: "Another", subtitle: "12 Episódios (Terror)", image: "https://i.postimg.cc/PqHF1XrF/IMG-20251111-105046.jpg", url: CONSTRUCTION_LINK, synopsis: "Em 1998, um estudante transferido, Koichi Sakakibara, se aproxima da misteriosa Misaki Mei, mas descobre que ela e o resto de sua classe escondem um segredo terrível ligado a uma série de mortes.", trailerId: "wG2c27b0X-E" },
                { title: "Death Note", subtitle: "37 Episódios (Suspense)", image: "https://i.postimg.cc/NGd2Rpbb/IMG-20251111-103316.jpg", url: CONSTRUCTION_LINK, synopsis: "Um estudante do ensino médio encontra um caderno sobrenatural que lhe permite matar qualquer pessoa escrevendo seu nome. Ele decide criar um mundo sem o mal, mas seus planos são frustrados por um detetive gênio.", trailerId: "Yv2yD9V-13A" },
                { title: "Code Geass: Lelouch of the Rebellion", subtitle: "25 Episódios (Mecha, Militar)", image: "https://i.postimg.cc/zvwvwbMc/135089.jpg", url: CONSTRUCTION_LINK, synopsis: "O exilado príncipe Lelouch vi Britannia ganha um poder misterioso chamado Geass, que lhe permite dar ordens absolutas. Ele usa esse poder para liderar uma rebelião contra seu império tirânico.", trailerId: "X_xT6KjJgq0" },
                { title: "Cowboy Bebop", subtitle: "26 Episódios (Sci-Fi, Ação)", image: "https://i.postimg.cc/yxt4hMkM/images-16.webp", url: CONSTRUCTION_LINK, synopsis: "Acompanha as desventuras de um grupo de caçadores de recompensas viajando pela galáxia a bordo da nave espacial Bebop no ano de 2071.", trailerId: "O9-H-Y13b4w" },
                { title: "Puella Magi Madoka Magica", subtitle: "12 Episódios (Drama, Mágica)", image: "https://i.postimg.cc/7YcyLYbj/127508.webp", url: CONSTRUCTION_LINK, synopsis: "Duas garotas se deparam com uma criatura mágica que se oferece para realizar qualquer desejo delas. Em troca, elas devem se tornar 'garotas mágicas' e lutar contra bruxas.", trailerId: "C1J6iG3c18E" },
                { title: "Haikyuu!! T1", subtitle: "25 Episódios (Esportes)", image: "https://i.postimg.cc/zGgkd9cK/IMG-20251111-104051.jpg", url: CONSTRUCTION_LINK, synopsis: "Um garoto baixinho, Shoyo Hinata, se junta ao time de vôlei da escola para provar que a altura não importa no vôlei.", trailerId: "sFvQk11Xh00" }
            ],
            recentReleases: [
                { title: "My Hero Academia Final Season", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/wM05SzhW/IMG-20251111-112503.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para My Hero Academia Final Season.", trailerId: "qI9hDqfC6x0" },
                { title: "Spy × Family S3", subtitle: "Ep. 1 (4 de Out. 2025)", image: "https://i.postimg.cc/NMc3p8GT/IMG-20251111-111133.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Spy × Family S3.", trailerId: "o9e9P2H9s3c" },
                { title: "One‑Punch Man S3", subtitle: "Ep. 1 (12 de Out. 2025)", image: "https://i.postimg.cc/Tw040ZHV/images-2025-11-11T111248-289.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para One‑Punch Man S3.", trailerId: "bYg7K64b55c" },
                { title: "Dusk Beyond the End of the World", subtitle: "Ep. 1 (26 de Set. 2025)", image: "https://i.postimg.cc/m2zm1zR8/IMG-20251111-111359.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Dusk Beyond the End of the World.", trailerId: "placeholder" },
                { title: "This Monster Wants to Eat Me!", subtitle: "Ep. 1 (2 de Out. 2025)", image: "https://i.postimg.cc/bNtRN7H4/IMG-20251111-111459.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para This Monster Wants to Eat Me!.", trailerId: "placeholder" },
                { title: "May I Ask for One Final Thing?", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/ZY9QpDLk/filters-quality-95-format-webp-6.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para May I Ask for One Final Thing?.", trailerId: "placeholder" },
                { title: "Kakuriyo: Bed & Breakfast for Spirits S2", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/VLqDFyr0/81lBpKcTSrL.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Kakuriyo: Bed & Breakfast for Spirits S2.", trailerId: "placeholder" },
                { title: "With You, Our Love Will Make It Through", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/cH3Q4Yfg/images-13.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para With You, Our Love Will Make It Through.", trailerId: "placeholder" },
                { title: "A Star Brighter than the Sun", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/YSW417jt/images-14.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para A Star Brighter than the Sun.", trailerId: "placeholder" },
                { title: "Who Made Me a Princess", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/jdDRWXDR/images-15.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Who Made Me a Princess.", trailerId: "placeholder" },
                { title: "The Banished Court Magician Aims to Become the Strongest", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/yxt4hMkM/images-16.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para The Banished Court Magician Aims to Become the Strongest.", trailerId: "placeholder" },
                { title: "A Gatherer’s Adventure in Isekai", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/xTGqj5hJ/images-2025-11-11T112830-071.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para A Gatherer’s Adventure in Isekai.", trailerId: "placeholder" },
                { title: "Dad is a Hero, Mom is a Spirit, I’m a Reincarnator", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/NFWS2Rns/images-2025-11-11T112142-360.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Dad is a Hero, Mom is a Spirit, I’m a Reincarnator.", trailerId: "placeholder" },
                { title: "Blue Orchestra S2", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/mr5vGxSy/images-2025-11-11T112238-100.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Blue Orchestra S2.", trailerId: "placeholder" },
                { title: "Kingdom S6", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/LswbbtHN/images-2025-11-11T112334-528.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Kingdom S6.", trailerId: "placeholder" },
                { title: "To Your Eternity S3", subtitle: "Ep. 1 (Outuno 2025)", image: "https://i.postimg.cc/nhLSVRr9/images-2025-11-11T112408-236.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para To Your Eternity S3.", trailerId: "placeholder" },
            ],
            popularAnimes: [
                { title: "Naruto Shippuden", subtitle: "500 Episódios", image: "https://i.postimg.cc/02VxHSDp/IMG-20251111-095340.jpg", url: "catalogo/chotto_dake.html", synopsis: "Sinopse placeholder para Naruto Shippuden teste.", trailerId: "placeholder" },
                { title: "Dragon Ball Super", subtitle: "131 Episódios", image: "https://i.postimg.cc/DwDtGPkM/IMG-20251111-101701.jpg", url: "catalogo/orient.html", synopsis: "Sinopse placeholder para Dragon Ball Super.", trailerId: "placeholder" },
                { title: "Death Note", subtitle: "37 Episódios", image: "https://i.postimg.cc/NGd2Rpbb/IMG-20251111-103316.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Death Note.", trailerId: "Yv2yD9V-13A" },
                { title: "Fullmetal Alchemist: Brotherhood", subtitle: "64 Episódios", image: "https://i.postimg.cc/xTRQX4Rc/IMG-20251111-103449.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Fullmetal Alchemist: Brotherhood.", trailerId: "qE5Y6u0Gg4M" },
                { title: "Hunter x Hunter (2011)", subtitle: "148 Episódios", image: "https://i.postimg.cc/Pr6cssyV/IMG-20251111-103924.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Hunter x Hunter (2011).", trailerId: "d6k-tV-3V3w" },
                { title: "Haikyuu!!", subtitle: "4 Temporadas + Filmes", image: "https://i.postimg.cc/zGgkd9cK/IMG-20251111-104051.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Haikyuu!!.", trailerId: "sFvQk11Xh00" },
                { title: "Sword Art Online", subtitle: "T1, T2, T3 + Filmes", image: "https://i.postimg.cc/5tfFwTd4/IMG-20251111-104238.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Sword Art Online.", trailerId: "placeholder" },
                { title: "One Punch Man", subtitle: "2 Temporadas", image: "https://i.postimg.cc/5tfFwTd4/IMG-20251111-104238.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para One Punch Man.", trailerId: "placeholder" },
                { title: "Spy x Family", subtitle: "2 Temporadas + Filme", image: "https://i.postimg.cc/nLwBp25K/IMG-20251111-104434.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Spy x Family.", trailerId: "placeholder" },
                { title: "Vinland Saga", subtitle: "2 Temporadas", image: "https://i.postimg.cc/vBfBkvd3/IMG-20251111-104607.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Vinland Saga.", trailerId: "placeholder" },
                { title: "Mob Psycho 100", subtitle: "3 Temporadas", image: "https://i.postimg.cc/RhPzD3qC/IMG-20251111-104810.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Mob Psycho 100.", trailerId: "placeholder" },
                { title: "Steins;Gate", subtitle: "24 Episódios + Filme", image: "https://i.postimg.cc/CKp9JCJH/IMG-20251111-104940.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Steins;Gate.", trailerId: "placeholder" },
                { title: "Demon Slayer: Kimetsu no Yaiba", subtitle: "Todas as Temporadas", image: "https://i.postimg.cc/PqHF1XrF/IMG-20251111-105046.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Demon Slayer: Kimetsu no Yaiba.", trailerId: "placeholder" },
                { title: "A Viagem de Chihiro", subtitle: "Filme Clássico", image: "https://i.postimg.cc/mgyKXzq7/IMG-20251111-105228.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para A Viagem de Chihiro.", trailerId: "placeholder" },
                { title: "Your Name", subtitle: "Filme", image: "https://i.postimg.cc/V6ffZPDN/MV5BOTkzMGIyYzAtMDQyYi00OTkxLWI2ZGMtODNmYjMyMWM3ZGY1XkEyXkFqcGc@._V1_.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Your Name.", trailerId: "placeholder" },
            ],
            recentlyAdded: [
                { title: "Chotto dake Ai ga Omoi Dark Elf ga Isekai kara Oikaketekita ", subtitle: "12 Episódios", image: "https://i.postimg.cc/1XYJM2Dt/MV5BNjc1MDQ2NWIt-M2Y1My00ZDE5LThl-Yj-Ut-ZTdk-ZTZj-Yzdl-NWZiXk-EyXkFqc-Gc-V1-FMjpg-UX1000.jpg", url: "catalogo/chotto_dake.html", synopsis: "Sinopse Um estudante completa uma missão para derrotar um rei demônio em outro mundo, mas quando ele retorna, é caçado por uma elfa que se apaixonou por ele.", trailerId: "placeholder" },
                { title: "The Faraway Paladin", subtitle: "12 Episódios", image: "https://i.postimg.cc/HnHVRk4y/images-2025-11-11T222800-016.jpg", url: "https://linkpremiado51-cmd.github.io/Yshippanime/", synopsis: "Sinopse Uma cidade dos mortos, destruída há muito tempo... Nesta cidade afastada de todos, há uma única criança viva, Will. O menino é criado por três mortos vivos: Blood, um espadachim esqueleto; Maria, uma freira múmia; e Gus, um mago fantasma. Ele é criado por eles recebendo ensinamentos e amor. Mas um dia o jovem começa a ter dúvidas. Quem é este 'eu'? Assim os mistérios dessa cidade longamente passam a ser vendidos por Will. O amor e a misericórdia dos deuses bons. A paranóia e a loucura dos deuses maus. E ao saber de tudo isso, o jovem começa o caminho rumo a se tornar um paladino.", trailerId: "placeholder" },
                { title: "gachiakuta", subtitle: "25 Episódios", image: "https://i.postimg.cc/mDdgXykx/images-2025-11-11T223742-007.jpg", url: "catalogo/gachiakuta.html", synopsis: "Sinopse Rudo, um jovem órfão que vive em uma favela marginalizada, discriminada pela elite de uma cidade flutuante. Após ser falsamente acusado de assassinato, ele é jogado em um inferno chamado O Poço, um lugar habitado por monstros de lixo. Para sobreviver e buscar vingança, ele precisa dominar um novo poder e se unir aos Limpadores (Cleaners), um grupo que luta contra as criaturas do lixo.", trailerId: "placeholder" },
                { title: "Cyberpunk: Edgerunners", subtitle: "10 Episódios", image: "https://i.postimg.cc/26PSN8QP/images-17.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse Cyberpunk: Edgerunners conta a história de David Martinez, um garoto de rua que, após perder tudo, decide se tornar um edgerunner, um mercenário fora da lei também conhecido como cyberpunk — para sobreviver em uma distópica cidade futurista obcecada por tecnologia e implantes cibernéticos. A série é uma produção de 10 episódios derivada do videogame Cyberpunk 2077, criada em colaboração com o Studio Trigger e a Netflix. ", trailerId: "placeholder" },
                { title: "Ranking of Kings", subtitle: "23 Episódios", image: "https://i.postimg.cc/qMpdh3vG/images-18.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse O povo do reino despreza o jovem Principe Bojji que nao consegue ouvir nem falar chamando-o de O Principe Inutil e zombando de sua suposta tolice Contudo embora Bojji nao seja fisicamente forte ele nao falta coracao Um encontro fortuito com uma criatura das sombras que deveria tê-lo traumatizado faz com que ele acredite ter encontrado um amigo em meio a aqueles que so notam suas deficiencias Ele comeca a se encontrar regularmente com Kage a sombra a ponto de ate mesmo a criatura antes aspera comecar a se mostrar mais amigavel A improvavel amizade entre Kage e Bojji lança as bases da jornada do principe uma jornada na qual ele pretende vencer seus medos e inseguranças Apesar do ridiculo constante que enfrenta Bojji esta determinado a realizar seu desejo de se tornar o melhor rei que puder ser", trailerId: "placeholder" },
                { title: "Spy x Family S1", subtitle: "25 Episódios", image: "https://i.postimg.cc/7YcyLYbj/127508.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse Politicos corruptos nacionalistas fanaticos e outras forcas belicistas amecaçam constantemente a tenue camada de paz entre os paises vizinhos de Ostania e Westalis Apesar de suas conspiraçoes o renomado espiao e mestre dos disfarces Twilight cumpre perigosas missoes uma apos a outra na esperança de que nenhuma crianca tenha que vivenciar os horrores da guerra Na movimentada cidade de Berlint em Ostania Twilight assume o pseudonimo de Loid Forger um estimado psiquiatra No entanto sua verdadeira intencao e coletar informacoes sobre o proeminente politico Donovan Desmond que raramente aparece em publico na escola de seus filhos a prestigiosa Academia Eden Recrutando a ajuda da funcionaria solteira da prefeitura Yor Briar para fingir ser sua esposa e adotando a curiosa orfa de seis anos Anya como sua filha Loid coloca seu plano em açao Ele matriculara Anya na Academia Eden onde espera que ela se destaque e lhe de a oportunidade de conhecer Donovan sem levantar suspeitas Infelizmente para Loid ate mesmo um homem com seus talentos tem dificuldade em representar o papel de pai e marido amoroso E assim como Loid esconde sua verdadeira identidade Yor uma assassina clandestina conhecida como Princesa Espinho e Anya uma esper capaz de ler mentes tambem nao pretendem revelar seus proprios segredos Embora essa familia aparentemente perfeita seja construída sobre a mentira os Forjadores gradualmente compreendem que o amor que compartilham e mais importante do que tudo", trailerId: "placeholder" },
                { title: "Jojo's Bizarre Adventure: Stone Ocean", subtitle: "38 Episódios", image: "https://i.postimg.cc/NFqpnSMQ/119844.webp", url: CONSTRUCTION_LINK, synopsis: "Sinopse Forças conspiradoras incriminam Jolyne Kuujou por um crime imprudente, levando-a à infame Prisão da Rua Green Dolphin. Assim como seu pai, Joutarou, Jolyne é impetuosa, corajosa e justa; ela se revolta contra sua sentença injusta e rapidamente descobre as circunstâncias sinistras que a levaram à prisão. Um presente de seu pai ausente concede a Jolyne o poder de Stone Free, uma habilidade sobrenatural conhecida como Stand, que lhe permite transformar seu corpo em fios. Jolyne usa Stone Free para lutar em sua jornada pela prisão, recrutando novos aliados — Ermes Costello e Foo Fighters — para ajudá-la em sua investigação. Juntas, as destemidas mulheres lutam para desvendar a ameaça por trás de Whitesnake, um Stand inimigo, responsável pelos prisioneiros cada vez mais perigosos que estão atrás da vida de Jolyne. Através de Jolyne, a linhagem Joestar confronta o legado de seu único e verdadeiro inimigo. Jolyne e seus amigos correm contra o tempo para impedir um plano desastroso e pôr fim a um mal crescente.", trailerId: "placeholder" },
                { title: "Tengen Toppa Gurren Lagann", subtitle: "27 Episódios", image: "https://i.postimg.cc/MTDmsTht/5123.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse Simon e Kamina nasceram e foram criados em uma vila subterrânea profunda, escondida da lendária superfície. Kamina é um espírito livre e impulsivo, determinado a deixar seu nome na história, enquanto Simon é um garoto tímido e sem grandes aspirações. Um dia, ao escavar a terra, Simon encontra um objeto misterioso que acaba sendo a chave de ignição de um antigo artefato de guerra, que a dupla chama de Lagann. Usando sua nova arma, Simon e Kamina repelem um ataque surpresa vindo da superfície com a ajuda de Yoko Littner, uma ruiva destemida e armada com um enorme rifle, que vaga pelo mundo acima. Após a batalha, o céu finalmente se revela diante deles, levando Simon e Kamina a embarcar em uma jornada ao lado de Yoko para explorar as terras devastadas da superfície. Logo, eles se unem à luta contra os Beastmen, criaturas humanoides que aterrorizam os remanescentes da humanidade em poderosos robôs chamados Gunmen. Apesar dos desafios e reveses, o trio luta corajosamente contra esses novos inimigos ao lado de outros sobreviventes para reconquistar a superfície, enquanto aos poucos desvendam um mistério de proporções galácticas.", trailerId: "placeholder" },
                { title: "Code Geass", subtitle: "2 Temporadas", image: "https://i.postimg.cc/zvwvwbMc/135089.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse Um ano se passou desde a Rebelião Negra, uma tentativa fracassada de levante contra o Sacro Império da Britannia, liderada pelo vigilante mascarado Zero, que agora está desaparecido. Sem seu líder revolucionário, o grupo de resistência da Área 11 — os Cavaleiros Negros — se vê impotente diante da brutalidade imposta aos Elevens por Britannia, que aumentou drasticamente seus esforços para eliminar qualquer esperança de uma nova revolta. Lelouch Lamperouge, tendo perdido toda a memória de sua vida dupla, vive pacificamente ao lado de seus amigos como um estudante do Colégio Ashford. Sua antiga parceira, C.C., incapaz de aceitar essa reviravolta, decide lembrá-lo de seu verdadeiro propósito, na esperança de que o estrategista Zero renasça mais uma vez para concluir o que começou.", trailerId: "placeholder" },
                { title: "Violet Evergarden", subtitle: "13 Episódios + Filme", image: "https://i.postimg.cc/Kc0djvRG/95088.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse A Grande Guerra finalmente chegou ao fim após quatro longos anos de conflito. Dividido em dois, o continente de Telesis começou lentamente a florescer novamente. Presa no meio do derramamento de sangue estava Violet Evergarden, uma jovem criada com o único propósito de dizimar as linhas inimigas. Hospitalizada e mutilada em uma sangrenta escaramuça durante a fase final da guerra, ela ficou apenas com as palavras da pessoa que mais amava, mas sem entender seu significado. Recuperando-se de seus ferimentos, Violet começa uma nova vida trabalhando nos Correios CH após um desentendimento com sua nova família adotiva. Lá, ela testemunha por acaso o trabalho de uma Boneca de Memória Automática, amanuenses que transcrevem os pensamentos e sentimentos das pessoas em palavras no papel. Comovida pela ideia, Violet decide seguir esse caminho e se torna uma Boneca de Memória Automática, embarcando em uma jornada que transformará a vida de seus clientes e, com sorte, a conduzirá à autodescoberta.", trailerId: "placeholder" },
                { title: "Hajime no Ippo", subtitle: "75 Episódios", image: "https://i.postimg.cc/RhPzD3qC/IMG-20251111-104810.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Hajime no Ippo.", trailerId: "placeholder" },
                { title: "Slam Dunk", subtitle: "101 Episódios", image: "https://i.postimg.cc/CKp9JCJH/IMG-20251111-104940.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Slam Dunk.", trailerId: "placeholder" },
                { title: "Yu Yu Hakusho", subtitle: "112 Episódios", image: "https://i.postimg.cc/PqHF1XrF/IMG-20251111-105046.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Yu Yu Hakusho.", trailerId: "placeholder" },
                { title: "Rurouni Kenshin (2023)", subtitle: "24 Episódios", image: "https://i.postimg.cc/mgyKXzq7/IMG-20251111-105228.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Rurouni Kenshin (2023).", trailerId: "placeholder" },
                { title: "Trigun Stampede", subtitle: "12 Episódios", image: "https://i.postimg.cc/V6ffZPDN/MV5BOTkzMGIyYzAtMDQyYi00OTkxLWI2ZGMtODNmYjMyMWM3ZGY1XkEyXkFqcGc@._V1_.jpg", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Trigun Stampede.", trailerId: "kupW7eDG48s" },
            ],
            genresAnimes: [
                { title: "Ação", subtitle: "Animes de Luta e Batalha", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Ação.", trailerId: "placeholder" },
                { title: "Aventura", subtitle: "Grandes Jornas", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Aventura.", trailerId: "placeholder" },
                { title: "Comédia", subtitle: "Para Rir", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Comédia.", trailerId: "placeholder" },
                { title: "Drama", subtitle: "Histórias Emocionantes", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Drama.", trailerId: "placeholder" },
                { title: "Fantasia", subtitle: "Mundo de Magia", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Fantasia.", trailerId: "placeholder" },
                { title: "Isekai", subtitle: "Outros Mundos", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Isekai.", trailerId: "placeholder" },
                { title: "Romance", subtitle: "Histórias de Amor", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Romance.", trailerId: "placeholder" },
                { title: "Slice of Life", subtitle: "Vida Cotidiana", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Slice of Life.", trailerId: "placeholder" },
                { title: "Sci-Fi", subtitle: "Ficção Científica", url: CONSTRUCTION_LINK, synopsis: "Sinopse placeholder para Sci-Fi.", trailerId: "placeholder" },
                { title: "Suspense", subtitle: "Mistério e Tensão", url: CONSTRUCTION_LINK, synopsis: "Animes que apresentam mistérios, suspense e tensão psicológica.", trailerId: "placeholder" },
                { title: "Mecha", subtitle: "Robôs Gigantes", url: CONSTRUCTION_LINK, synopsis: "Animes que apresentam robôs gigantes ou máquinas de combate pilotadas.", trailerId: "placeholder" },
                { title: "Militar", subtitle: "Estratégia e Guerra", url: CONSTRUCTION_LINK, synopsis: "Temas de guerra, exércitos e estratégia militar.", trailerId: "placeholder" },
                { title: "Música", subtitle: "Melodias e Bandas", url: CONSTRUCTION_LINK, synopsis: "Animes focados em performances musicais e desenvolvimento de talentos.", trailerId: "placeholder" },
                { title: "Sobrenatural", subtitle: "Poderes Ocultos", url: CONSTRUCTION_LINK, synopsis: "Histórias com elementos como fantasmas, espíritos ou poderes ocultos.", trailerId: "placeholder" },
                { title: "Terror", subtitle: "Medo e Horror", url: CONSTRUCTION_LINK, synopsis: "Animes com foco em terror, gore e elementos assustadores.", trailerId: "placeholder" },
                { title: "Horror", subtitle: "Terror e Sobrenatural", url: CONSTRUCTION_LINK, synopsis: "Terror e Sobrenatural", trailerId: "placeholder" },
                { title: "Esportes", subtitle: "Competição e Paixão", url: CONSTRUCTION_LINK, synopsis: "Competição e Paixão", trailerId: "placeholder" },
            ],
        };

        // Dados para o novo carrossel de imagens
        const imageCarouselData = [
            { title: "Imagem 1", comment: "Comentário sobre a imagem 1", image: "https://i.postimg.cc/KjWxFhB4/Im-Getting-Marriedtoa-Girl-IHatein-My-Class-S1-KV1-Banner-2100x700-PT.png", url: CONSTRUCTION_LINK },
            { title: "Imagem 2", comment: "Comentário sobre a imagem 2", image: "https://i.postimg.cc/KjWxFhB4/Im-Getting-Marriedtoa-Girl-IHatein-My-Class-S1-KV1-Banner-2100x700-PT.png", url: CONSTRUCTION_LINK },
            { title: "Imagem 3", comment: "Comentário sobre a imagem 3", image: "https://i.postimg.cc/KjWxFhB4/Im-Getting-Marriedtoa-Girl-IHatein-My-Class-S1-KV1-Banner-2100x700-PT.png", url: CONSTRUCTION_LINK },
            { title: "Imagem 4", comment: "Comentário sobre a imagem 4", image: "https://i.postimg.cc/KjWxFhB4/Im-Getting-Marriedtoa-Girl-IHatein-My-Class-S1-KV1-Banner-2100x700-PT.png", url: CONSTRUCTION_LINK },
            { title: "Imagem 5", comment: "Comentário sobre a imagem 5", image: "https://i.postimg.cc/KjWxFhB4/Im-Getting-Marriedtoa-Girl-IHatein-My-Class-S1-KV1-Banner-2100x700-PT.png", url: CONSTRUCTION_LINK }
        ];

        const allAnimes = [
            ...homepageData.recentReleases,
            ...homepageData.popularAnimes,
            ...homepageData.recentlyAdded,
            ...homepageData.bingeWatch
        ];
        window.searchAnimes = async (query) => {};
        async function getIPAddress() {}
        async function recordReportError(errorType) {}
        function openHamburgerMenu() {
            document.getElementById('hamburgerMenu')?.classList.add('open');
            document.getElementById('menuOverlay')?.classList.add('active');
        }
        function closeHamburgerMenu() {
            document.getElementById('hamburgerMenu')?.classList.remove('open');
            document.getElementById('menuOverlay')?.classList.remove('active');
        }
        window.closeHamburgerMenu = closeHamburgerMenu;
        function openReportModal() {
            const modal = document.getElementById('reportErrorModal');
            if (modal) modal.style.display = 'flex';
        }
        function closeReportModal() {
            const modal = document.getElementById('reportErrorModal');
            if (modal) modal.style.display = 'none';
        }
        function showNotification(message) {
            const notification = document.getElementById('notification');
            if (!notification) return;
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
        window.showNotification = showNotification;
        function openDetailsModal(title, synopsis, trailerId) {
            const modal = document.getElementById('detailsModal');
            const titleElem = document.getElementById('detailsTitle');
            const textElem = document.getElementById('synopsisText');
            const trailerFrame = document.getElementById('trailerVideo');
            if (modal && titleElem && textElem && trailerFrame) {
                titleElem.textContent = title;
                textElem.textContent = synopsis;
                let trailerUrl = '';
                if (trailerId && trailerId !== 'placeholder') {
                    trailerUrl = `https://www.youtube-nocookie.com/embed/${trailerId}?autoplay=1&mute=0&controls=1&rel=0&showinfo=0&loop=0`;
                } else {
                    trailerUrl = `https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&mute=1&controls=0`;
                }
                trailerFrame.src = trailerUrl;
                modal.style.display = 'flex';
            }
        }
        function closeDetailsModal() {
            const modal = document.getElementById('detailsModal');
            const trailerFrame = document.getElementById('trailerVideo');
            if (modal && trailerFrame) {
                trailerFrame.src = '';
                modal.style.display = 'none';
            }
        }
        function renderAnimeCards(containerId, animeList, isHorizontal = false) {
            const container = document.getElementById(containerId);
            if (!container) return;
            if (isHorizontal) {
                container.classList.add('carousel-horizontal');
                container.classList.remove('anime-grid');
            } else {
                container.classList.add('anime-grid');
                container.classList.remove('carousel-horizontal');
            }
            container.innerHTML = '';
            const uniqueAnimes = animeList.filter((anime, index, self) =>
                index === self.findIndex((a) => a.title === anime.title)
            );
            uniqueAnimes.forEach((anime, index) => {
                const card = document.createElement('a');
                card.href = (anime.url === '#' || !anime.url) ? CONSTRUCTION_LINK : anime.url;
                card.className = 'anime-card';
                card.style.animationDelay = `${index * 50}ms`;
                card.dataset.url = card.href;
                card.dataset.title = anime.title;
                card.dataset.synopsis = anime.synopsis || 'Sinopse não disponível.';
                card.dataset.trailerid = anime.trailerId || '';
                if (anime.image) {
                    card.innerHTML = `
                        <div class="anime-card-image" style="background-image: url('${anime.image}')"></div>
                        <div class="anime-card-info">
                            <div class="anime-card-title">${anime.title}</div>
                            <div class="anime-card-subtitle">${anime.subtitle}</div>
                        </div>
                    `;
                } else {
                    card.innerHTML = `
                        <div class="anime-card-info" style="height: 100%; display: flex; justify-content: center; align-items: center;">
                            <div class="anime-card-title">${anime.title}</div>
                        </div>
                    `;
                }
                // Adiciona o listener de clique ao card recém-criado
                let clickCount = 0;
                let clickTimer = null;
                card.addEventListener('click', (e) => {
                    e.preventDefault();
                    clickCount++;
                    if (clickCount === 1) {
                        clickTimer = setTimeout(() => {
                            const url = card.dataset.url;
                            if (url && url.startsWith('javascript:')) {
                                try {
                                    new Function(url.replace('javascript:', ''))();
                                } catch (err) {
                                    console.error("Erro ao executar:", err);
                                }
                            } else if (url && url !== "") {
                                window.location.href = url;
                            } else {
                                console.warn("URL do anime não definida:", card.dataset.title);
                            }
                            clickCount = 0;
                        }, 300);
                    } else if (clickCount === 2) {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        const title = card.dataset.title;
                        const synopsis = card.dataset.synopsis;
                        const trailerId = card.dataset.trailerid;
                        openDetailsModal(title, synopsis, trailerId);
                    }
                    if (clickCount > 2) {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                    }
                });
                container.appendChild(card);
            });
        }

        // NOVO: Função para renderizar o carrossel de imagens
        function renderImageCarousel(containerId, imageData) {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = ''; // Limpa o container

            imageData.forEach((item, index) => {
                const card = document.createElement('a');
                card.href = (item.url === '#' || !item.url) ? CONSTRUCTION_LINK : item.url;
                card.className = 'image-carousel-card';
                card.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" class="image-carousel-image" />
                    <div class="image-carousel-info">
                        <div class="image-carousel-title">${item.title}</div>
                        <div class="image-carousel-comment">${item.comment}</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // NOVO: Função para inicializar o carrossel automático
        function initializeImageCarousel(trackId, imageData) {
            renderImageCarousel(trackId, imageData);

            const track = document.getElementById(trackId);
            if (!track) return;

            const cards = track.querySelectorAll('.image-carousel-card');
            if (cards.length === 0) return;

            let currentIndex = 0;
            const totalCards = cards.length;

            const updateCarousel = () => {
                const offset = -currentIndex * 100; // 100% para cada card
                track.style.transform = `translateX(${offset}%)`;
            };

            // Função para avançar o carrossel
            const nextSlide = () => {
                currentIndex = (currentIndex + 1) % totalCards;
                updateCarousel();
            };

            // Inicia o intervalo automático
            const intervalId = setInterval(nextSlide, 6000); // 6 segundos

            // Opcional: Pausar o carrossel ao passar o mouse por cima
            track.addEventListener('mouseenter', () => {
                clearInterval(intervalId);
            });
            track.addEventListener('mouseleave', () => {
                setInterval(nextSlide, 6000);
            });
        }

        function initializeCarousel(containerId, data, isHorizontal = false) {
            renderAnimeCards(containerId, data, isHorizontal);
        }
        function buildHeroSlider(containerId, heroList) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            // Limita a 10 slides
            const limitedHeroList = heroList.slice(0, 10);
            limitedHeroList.forEach((item, index) => {
                const finalUrl = (item.url === '#' || !item.url) ? CONSTRUCTION_LINK : item.url;
                const slide = document.createElement('a');
                slide.href = finalUrl;
                slide.className = `hero-carousel-slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" loading="${index === 0 ? 'eager' : 'lazy'}" />
                    <div class="hero-carousel-info">
                        <h2>${item.title}</h2>
                        <p>${item.subtitle}</p>
                    </div>
                `;
                container.querySelector('.hero-carousel-track').appendChild(slide);
            });
        }

        // NOVO: Função para construir o carrossel de capa com deslizamento e barras de progresso
        function buildHeroCarouselWithProgress(containerId, progressContainerId, heroList) {
            const container = document.getElementById(containerId);
            const progressContainer = document.getElementById(progressContainerId);
            if (!container || !progressContainer) return;

            // Limpa os elementos anteriores
            container.querySelector('.hero-carousel-track').innerHTML = '';
            progressContainer.innerHTML = '';

            // Limita a 10 slides
            const limitedHeroList = heroList.slice(0, 10);
            const totalSlides = limitedHeroList.length;

            if (totalSlides === 0) return;

            limitedHeroList.forEach((item, index) => {
                const finalUrl = (item.url === '#' || !item.url) ? CONSTRUCTION_LINK : item.url;
                const slide = document.createElement('a');
                slide.href = finalUrl;
                slide.className = `hero-carousel-slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" loading="${index === 0 ? 'eager' : 'lazy'}" />
                    <div class="hero-carousel-info">
                        <h2>${item.title}</h2>
                        <p>${item.subtitle}</p>
                    </div>
                `;
                container.querySelector('.hero-carousel-track').appendChild(slide);

                // Cria barra de progresso
                const progressBar = document.createElement('div');
                progressBar.className = `progress-bar ${index === 0 ? 'active' : ''}`;
                progressBar.dataset.index = index;
                progressContainer.appendChild(progressBar);
            });

            let currentSlide = 0;
            let intervalId;

            const updateCarousel = (newIndex) => {
                const slides = container.querySelectorAll('.hero-carousel-slide');
                const progressBars = progressContainer.querySelectorAll('.progress-bar');
                if (newIndex >= 0 && newIndex < slides.length) {
                    // Atualiza slide
                    const offset = -newIndex * 100;
                    container.querySelector('.hero-carousel-track').style.transform = `translateX(${offset}%)`;
                    // Atualiza barras
                    progressBars.forEach((bar, i) => {
                        bar.classList.remove('active');
                        if (i === newIndex) {
                            bar.classList.add('active');
                        }
                    });
                    currentSlide = newIndex;
                }
            };

            const startAutoSlide = () => {
                clearInterval(intervalId);
                intervalId = setInterval(() => {
                    const nextSlide = (currentSlide + 1) % totalSlides;
                    updateCarousel(nextSlide);
                }, 6000); // 6 segundos
            };

            // Eventos de usuário para pausar/resumir
            container.addEventListener('mouseenter', () => {
                clearInterval(intervalId);
            });
            container.addEventListener('mouseleave', startAutoSlide);

            // Inicia o carrossel automático
            startAutoSlide();

            // Opcional: Adicionar funcionalidade de clique nas barras de progresso
            progressContainer.querySelectorAll('.progress-bar').forEach(bar => {
                bar.addEventListener('click', () => {
                    const index = parseInt(bar.dataset.index);
                    updateCarousel(index);
                    startAutoSlide(); // Reinicia o timer após clique
                });
            });
        }

        function setupAutoScrollCarousel(containerId, animeList) {
            const container = document.getElementById(containerId);
            if (!container) return;
            initializeCarousel(containerId, animeList, true);
            const cards = container.querySelectorAll('.anime-card');
            if (cards.length === 0) return;
            let currentIndex = 0;
            let intervalId;
            const scrollInterval = 5000;
            const startAutoScroll = () => {
                clearInterval(intervalId);
                intervalId = setInterval(() => {
                    const gap = parseInt(getComputedStyle(container).gap) || 0;
                    const cardWidth = cards[0] ? cards[0].offsetWidth + gap : 0;
                    if (cardWidth === 0) return;
                    currentIndex = (currentIndex + 1) % cards.length;
                    container.scrollTo({
                        left: currentIndex * cardWidth,
                        behavior: 'smooth'
                    });
                    if (currentIndex >= cards.length - 1) {
                        setTimeout(() => {
                            container.scrollTo({ left: 0, behavior: 'auto' });
                            currentIndex = 0;
                        }, 300);
                    }
                }, scrollInterval);
            };
            const stopAutoScroll = () => clearInterval(intervalId);
            const userInteractionHandler = () => {
                stopAutoScroll();
                setTimeout(startAutoScroll, 5000);
            };
            container.addEventListener('touchstart', userInteractionHandler);
            container.addEventListener('mousedown', userInteractionHandler);
            container.addEventListener('wheel', userInteractionHandler);
            container.addEventListener('scroll', userInteractionHandler);
            startAutoScroll();
        }
        function loadCategoryContent(category) {
            // Não faz nada, pois os iframes já estão pré-carregados
        }
        function showCategory(category) {
            document.querySelectorAll('.nav-menu-item').forEach(item => {
                if (item.dataset.category === category) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            document.querySelectorAll('.category-content').forEach(content => {
                if (content.id === `${category}-content`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            document.querySelectorAll('.iframe-container').forEach(container => {
                if (container.dataset.category === category) {
                    container.classList.add('active');
                } else {
                    container.classList.remove('active');
                }
            });
            localStorage.setItem('lastActiveCategory', category);
        }
        function buildHomepage() {
            //buildHeroSlider('hero-carousel-container', homepageData.hero); // Removido
            buildHeroCarouselWithProgress('hero-carousel-container', 'progress-container', homepageData.hero); // Novo
            initializeCarousel('recent-releases-grid', homepageData.recentReleases);
            initializeCarousel('popular-animes-grid', homepageData.popularAnimes);
            initializeCarousel('recently-added-grid', homepageData.recentlyAdded);
            initializeCarousel('generos-externo-grid', homepageData.genresAnimes);
            const shuffled = [...allAnimes].sort(() => 0.5 - Math.random());
            const recommendList = shuffled.slice(0, 10);
            setupAutoScrollCarousel('recommend-carousel', recommendList);
            setupAutoScrollCarousel('binge-watch-carousel', homepageData.bingeWatch);

            // Inicializa o novo carrossel de imagens
            initializeImageCarousel('image-carousel-track', imageCarouselData);

            setTimeout(() => {
                document.body.classList.remove('loading');
                const loader = document.getElementById('initial-loader');
                if (loader) loader.style.display = 'none';
            }, 150);
        }
        const INITIAL_ZOOM = parseFloat(localStorage.getItem('zoomLevel')) || 0.75;
        const MIN_ZOOM = 0.5;
        const MAX_ZOOM = 1.5;
        function setupEventListeners() {
            const searchInput = document.getElementById('search-input');
            const menuToggle = document.getElementById('menu-icon');
            const mainMenu = document.getElementById('main-menu');
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;
            const zoomInBtnFixed = document.getElementById('zoom-in-btn-fixed');
            const zoomOutBtnFixed = document.getElementById('zoom-out-btn-fixed');
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const menuOverlay = document.getElementById('menuOverlay');
            const rootElement = document.documentElement;
            let currentScale = INITIAL_ZOOM;
            const step = 0.05;
            const baseFontSize = 16;
            function updateZoom(showNotif = true) {
                rootElement.style.fontSize = `${baseFontSize * currentScale}px`;
                localStorage.setItem('zoomLevel', currentScale.toFixed(2));
                const isDisabledMax = currentScale >= MAX_ZOOM;
                const isDisabledMin = currentScale <= MIN_ZOOM;
                if (zoomInBtnFixed) zoomInBtnFixed.disabled = isDisabledMax;
                if (zoomOutBtnFixed) zoomOutBtnFixed.disabled = isDisabledMin;
            }
            function handleZoom(direction) {
                if (direction === 'in') {
                    currentScale = Math.min(MAX_ZOOM, currentScale + step);
                } else if (direction === 'out') {
                    currentScale = Math.max(MIN_ZOOM, currentScale - step);
                }
                currentScale = parseFloat(currentScale.toFixed(2));
                updateZoom(true);
                // Enviar atualização de zoom + tema para todos os iframes
                document.querySelectorAll('.category-iframe').forEach(iframe => {
                    iframe.contentWindow.postMessage({
                        type: 'THEME_UPDATE',
                        theme: document.body.dataset.theme,
                        zoom: currentScale
                    }, '*');
                });
            }
            zoomInBtnFixed?.addEventListener('click', () => handleZoom('in'));
            zoomOutBtnFixed?.addEventListener('click', () => handleZoom('out'));
            updateZoom(false);
            setTimeout(() => {
                if (zoomInBtnFixed) zoomInBtnFixed.click();
                setTimeout(() => {
                    if (zoomOutBtnFixed) zoomOutBtnFixed.click();
                }, 500);
            }, 1000);
            hamburgerBtn?.addEventListener('click', (e) => {
                e.stopPropagation();
                openHamburgerMenu();
            });
            menuOverlay?.addEventListener('click', closeHamburgerMenu);
            searchInput?.addEventListener('input', (e) => {
                window.searchAnimes(e.target.value);
            });
            menuToggle?.addEventListener('click', (e) => {
                e.stopPropagation();
                mainMenu.classList.toggle('open');
                if (mainMenu.classList.contains('open') && searchInput) {
                    setTimeout(() => searchInput.focus(), 300);
                }
            });
            document.addEventListener('click', (e) => {
                if (mainMenu && !e.target.closest('#main-menu') && !e.target.closest('#menu-icon') && mainMenu.classList.contains('open')) {
                    mainMenu.classList.remove('open');
                }
            });
            function toggleTheme() {
                const newTheme = body.dataset.theme === 'light' ? 'dark' : 'light';
                body.dataset.theme = newTheme;
                localStorage.setItem('theme', newTheme);
                // Enviar mensagem para todos os iframes filhos
                document.querySelectorAll('.category-iframe').forEach(iframe => {
                    iframe.contentWindow.postMessage({
                        type: 'THEME_UPDATE',
                        theme: newTheme,
                        zoom: parseFloat(localStorage.getItem('zoomLevel')) || 0.75
                    }, '*');
                });
            }
            themeToggle?.addEventListener('click', toggleTheme);
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.dataset.theme = savedTheme;
            document.getElementById('closeReportModal')?.addEventListener('click', closeReportModal);
            document.getElementById('reportErrorModal')?.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-overlay')) {
                    closeReportModal();
                }
            });
            document.querySelectorAll('.report-option').forEach(button => {
                button.addEventListener('click', (e) => {
                    const errorType = e.currentTarget.dataset.errorType;
                    recordReportError(errorType);
                });
            });
            document.querySelectorAll('.carousel-title').forEach(titleElement => {
                titleElement.addEventListener('click', (e) => {
                    const linkId = e.currentTarget.dataset.linkId;
                    if (linkId && linkId !== 'none') {
                        showNotification(`Redirecionando para o Catálogo Completo de: ${e.currentTarget.textContent.trim()}`);
                    }
                });
            });
            document.getElementById('closeDetailsModal')?.addEventListener('click', closeDetailsModal);
            document.getElementById('detailsModal')?.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-overlay')) {
                    closeDetailsModal();
                }
            });
            document.querySelectorAll('.nav-menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const category = e.currentTarget.dataset.category;
                    showCategory(category);
                });
            });
        }
        function preloadAllIframes() {
            const currentTheme = document.body.dataset.theme || 'light';
            const currentZoom = parseFloat(localStorage.getItem('zoomLevel')) || 0.75;
            document.querySelectorAll('.category-iframe').forEach(iframe => {
                const category = iframe.parentElement.dataset.category;
                iframe.src = `${category}.html?theme=${encodeURIComponent(currentTheme)}&zoom=${currentZoom.toFixed(2)}`;
            });
        }
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            buildHomepage();
            preloadAllIframes();
            const lastCategory = localStorage.getItem('lastActiveCategory') || 'home';
            if (lastCategory !== 'home') {
                setTimeout(() => {
                    showCategory(lastCategory);
                }, 200);
            }
        });
        window.addEventListener('beforeunload', () => {
            localStorage.setItem('theme', document.body.dataset.theme);
            localStorage.setItem('zoomLevel', (parseFloat(document.documentElement.style.fontSize) / 16 || INITIAL_ZOOM).toFixed(2));
        });
    </script>
</body>
</html>

